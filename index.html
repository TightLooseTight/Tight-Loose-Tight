<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Tight–Loose–Tight Kalkulator</title>

  <!-- Homescreen / PWA hooks -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="TLT Kalkulator">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0a7cff" />

  <style>
    :root{
      --brand:#0a7cff; --brand-2:#5cc8ff;
      --bg:#0a0f1a; --card:#101828; --muted:#9aa4b2; --text:#eef2f7;
      --ok:#10b981; --warn:#f59e0b; --bad:#ef4444; --radius:16px; --disabled:#1a2234;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color:var(--text);
      background:
        radial-gradient(1000px 600px at 90% -10%, rgba(10,124,255,.25), transparent 60%),
        radial-gradient(1000px 600px at 10% 110%, rgba(92,200,255,.25), transparent 60%),
        linear-gradient(180deg, #0b1220 0%, #0a0f1a 60%, #070b12 100%);
      min-height:100%;
    }
    .wrap{max-width:980px;margin:0 auto;padding:24px clamp(16px,4vw,28px) 80px}
    header{display:flex;flex-direction:column;align-items:center;gap:12px;margin-bottom:18px;text-align:center}

    /* Logo – stor (≈300%) */
    .logo{
      width:132px;height:132px;border-radius:12px;
      background:#0b1322;border:1px solid rgba(255,255,255,.1);
      display:flex;align-items:center;justify-content:center;overflow:hidden
    }
    .logo img{max-width:100%;max-height:100%;object-fit:contain}

    .title{font-size:clamp(26px,4.8vw,38px);font-weight:800;text-align:center}
    .subtitle{color:var(--muted);line-height:1.5}

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
      border:1px solid rgba(255,255,255,.07);
      border-radius:var(--radius);
      box-shadow:0 10px 30px rgba(0,0,0,.35);
      backdrop-filter:blur(6px);
      max-width:640px;
      margin:0 auto;
    }
    .card-inner{padding:clamp(16px,2.8vw,24px)}
    .row{display:grid;gap:12px}

    .lang{display:flex;gap:16px;align-items:center;justify-content:center}
    .flag{
      width:160px; height:106px; /* 3:2 */
      border-radius:8px; border:1px solid rgba(255,255,255,.2);
      cursor:pointer; opacity:.95; background:#0b1322;
    }
    .flag.active{ outline:2px solid var(--brand); opacity:1; }

    .nav-arrows{display:flex;justify-content:space-between;gap:12px;margin-top:18px}
    #p1-prev{display:none} /* ingen "Tilbake" på side 1 */
    #p5-next{display:none} /* ingen "Neste" på siste side */
    .arrow{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 14px;border-radius:12px;
      border:1px solid rgba(255,255,255,.1);
      background:#0b1322;color:var(--text);cursor:pointer
    }

    .btn{
      padding:12px 16px;border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background:linear-gradient(180deg,#0e1a33,#0b1322);
      color:var(--text);cursor:pointer;font-weight:700
    }
    .btn.primary{background:linear-gradient(180deg,var(--brand),var(--brand-2));color:#041123;border-color:transparent}
    .btn.ghost{background:transparent;border-color:rgba(255,255,255,.2)}
    .btn[disabled]{opacity:.5;cursor:not-allowed}

    .field{display:grid;gap:8px}
    input[type="text"]{
      width:100%;padding:12px 14px;border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background:#0b1322;color:var(--text);outline:none
    }
    .name-row{display:flex;gap:10px;align-items:center}
    .pencil{cursor:pointer;opacity:.8}

    .accordion{display:grid;gap:12px}
    .acc-item{
      border:1px solid rgba(255,255,255,.08);
      border-radius:14px;
      background:#0c1527
    }
    .acc-hd{
      display:flex;justify-content:space-between;
      align-items:center;padding:14px 16px;cursor:pointer
    }
    .acc-bd{display:none;padding:0 16px 16px 16px}
    .acc-item.open .acc-bd{display:block}

    .q{
      padding:12px;border-radius:12px;
      border:1px dashed rgba(255,255,255,.12);
      margin-top:10px
    }
    .q p{margin:0 0 10px 0}
    .scale{display:flex;gap:8px;flex-wrap:wrap}
    .pill{
      display:inline-flex;align-items:center;justify-content:center;
      min-width:42px;padding:8px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:#0b1322;color:var(--text);cursor:pointer
    }
    .pill.active{background:rgba(10,124,255,.30);border-color:var(--brand)}

    .scorebox{display:grid;gap:10px;grid-template-columns:repeat(3,1fr)}
    .score{
      text-align:center;padding:12px;border-radius:12px;
      border:1px solid rgba(255,255,255,.1);background:#0c1527
    }
    .score.disabled{background:var(--disabled);opacity:.7}
    .score h4{margin:2px 0 6px 0;color:var(--muted);font-weight:600}
    .score .big{font-size:28px;font-weight:900}
    .badge{font-weight:800;padding:2px 8px;border-radius:999px}
    .ok{background:rgba(16,185,129,.2);color:#d1fae5;border:1px solid rgba(16,185,129,.4)}
    .warn{background:rgba(245,158,11,.2);color:#fef3c7;border:1px solid rgba(245,158,11,.4)}
    .bad{background:rgba(239,68,68,.2);color:#fee2e2;border:1px solid rgba(239,68,68,.4)}

    footer{margin-top:28px;color:var(--muted);font-size:13px;text-align:center}
    .hidden{display:none!important}

    /* Side 1: senter flagg og tekst */
    #page-1 .row{place-items:center;text-align:center}
    #p1-text{width:100%;text-align:center}

    /* Info-side typografi */
    .lead{font-size:clamp(16px,2.2vw,19px); color:#d9e2ef}
    .muted{color:var(--muted)}
    .bullets{margin:0; padding-left:18px}
    .bullets li{margin:6px 0}

    /* Radar-styling */
    .radar-wrap{margin:16px 0 8px 0}
    .radar-card{
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
      border:1px solid rgba(255,255,255,.07);
      border-radius:14px;
      padding:12px
    }
    .radar-card svg{ width:100%; height:auto; display:block; }
    .radar-legend{
      display:flex;gap:16px;align-items:center;justify-content:center;
      color:var(--muted);font-size:13px;margin-top:6px
    }
    .legend-dot{
      width:10px;height:10px;border-radius:999px;
      display:inline-block;border:1px solid rgba(255,255,255,.4)
    }

      @media (max-width: 480px) {
      .lang {
        flex-direction: column;
        gap:12px;
      }
      .flag {
        width:140px;
        height:auto;
      }
    }

    /* Info-listen skal respektere linjeskift */
    #info-ul li {
      white-space: pre-line;
    }

    /* Skjul hele headeren på hver blokk (ikke klikkbar lenger) */
    .acc-hd {
      display: none;
    }

    /* Alltid vis innholdet i hver blokk (alltid "åpen") */
    .acc-bd {
      display: block !important;
    }
  
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo" title="Bytt ut logo.png i repoet for firmalogo">
        <img id="logo" src="logo.png" alt="Company Logo"
             onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%2244%22 height=%2244%22%3E%3Crect width=%22100%25%22 height=%22100%25%22 fill=%22%230b1322%22/%3E%3Ctext x=%2250%25%22 y=%2256%25%22 text-anchor=%22middle%22 font-size=%2220%22 fill=%22%239aa4b2%22 font-family=%22Arial%22%3ELOGO%3C/text%3E%3C/svg%3E'">
      </div>
      <div class="title">Tight–Loose–Tight</div>
      <div class="subtitle" id="subtitle">Refleksjonsverktøy for lederstil</div>
    </header>

    <div class="card">
      <div class="card-inner">

        <!-- PAGE 1: språkvalg -->
        <div id="page-1" class="page">
          <div class="row" style="gap:14px">
            <div class="lang">
              <img id="flag-no" class="flag"
                   src="./flags/no.png" alt="Norsk" title="Norsk"
                   onerror="this.onerror=null;this.src='https://flagcdn.com/w160/no.png'">
              <img id="flag-dk" class="flag"
                   src="./flags/dk.png" alt="Dansk" title="Dansk"
                   onerror="this.onerror=null;this.src='https://flagcdn.com/w160/dk.png'">
              <img id="flag-se" class="flag"
                   src="./flags/se.png" alt="Svensk" title="Svensk"
                   onerror="this.onerror=null;this.src='https://flagcdn.com/w160/se.png'">
            </div>
            <p id="p1-text" class="subtitle">Velg språk og gå videre.</p>
            <div class="nav-arrows">
              <button class="arrow" id="p1-prev">← Tilbake</button>
              <button class="arrow" id="p1-next">Neste →</button>
            </div>
          </div>
        </div>

        <!-- PAGE 2: info-side (dynamisk tekst fra app.js) -->
        <div class="page hidden" id="p2">
          <header class="page-header">
            <h1 id="info-h1"></h1>
            <p id="info-lead" class="lead"></p>
          </header>

          <main class="info-body">
            <p id="info-p1"></p>
            <ul id="info-ul"></ul>
            <p id="info-foot" class="muted"></p>
          </main>

          <div class="nav-arrows">
            <button class="arrow" id="p2-prev">← Tilbake</button>
            <button class="arrow" id="p2-next">Neste →</button>
          </div>
        </div>

        <!-- PAGE 3: navn -->
        <div id="page-3" class="page hidden">
          <div class="row" style="gap:14px">
            <div class="field">
              <label for="name" id="lbl-name">Skriv inn ditt navn</label>
              <div class="name-row">
                <input id="name" type="text" placeholder="Skriv navnet ditt…" />
                <button class="btn ghost" id="btn-ok">OK</button>
                <span id="btn-edit" class="pencil" title="Rediger" aria-label="Rediger navn">✎</span>
              </div>
              <small class="subtitle" id="p3-help">Navnet lagres lokalt på enheten og brukes i resultatene.</small>
            </div>
            <div class="nav-arrows">
              <button class="arrow" id="p3-prev">← Tilbake</button>
              <button class="arrow" id="p3-next">Neste →</button>
            </div>
          </div>
        </div>

        <!-- PAGE 4: test (3×5 spørsmål) -->
        <div id="page-4" class="page hidden">
          <h2 id="p4-title">Test deg selv – (0 = Ikke enig, 5 = Helt enig)</h2>
          <div class="accordion" id="acc"></div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:14px">
            <button class="btn primary" id="btn-calc">Oppdater resultater</button>
            <button class="btn" id="btn-readmore">Les resultater</button>
            <button class="btn ghost" id="btn-reset">Nullstill</button>
          </div>
          <div class="scorebox" style="margin-top:14px">
            <div class="score disabled" id="sb-t1">
              <h4>Tight (1)</h4><div class="big" id="sbv-t1">–</div><div class="muted" id="sbb-t1">–</div>
            </div>
            <div class="score disabled" id="sb-loose">
              <h4>Loose</h4><div class="big" id="sbv-loose">–</div><div class="muted" id="sbb-loose">–</div>
            </div>
            <div class="score disabled" id="sb-t2">
              <h4>Tight (2)</h4><div class="big" id="sbv-t2">–</div><div class="muted" id="sbb-t2">–</div>
            </div>
          </div>
          <div class="nav-arrows">
            <button class="arrow" id="p4-prev">← Tilbake</button>
            <button class="arrow" id="p4-next">Neste →</button>
          </div>
        </div>

        <!-- PAGE 5: resultater + radar (maks 25) -->
        <div id="page-5" class="page hidden">
          <h2 id="p5-title">Her er dine resultater <span id="userNameInline"></span></h2>
          <div class="scorebox" style="margin:10px 0 16px 0;grid-template-columns:1fr">
            <div class="score disabled" id="r-t1">
              <h4>Tight (1)</h4><div class="big" id="rv-t1">–</div><div class="muted" id="rb-t1">–</div>
              <p id="rt-t1" class="subtitle" style="margin-top:8px"></p>
            </div>
            <div class="score disabled" id="r-loose">
              <h4>Loose</h4><div class="big" id="rv-loose">–</div><div class="muted" id="rb-loose">–</div>
              <p id="rt-loose" class="subtitle" style="margin-top:8px"></p>
            </div>
            <div class="score disabled" id="r-t2">
              <h4>Tight (2)</h4><div class="big" id="rv-t2">–</div><div class="muted" id="rb-t2">–</div>
              <p id="rt-t2" class="subtitle" style="margin-top:8px"></p>
            </div>
          </div>

          <!-- Radar chart -->
          <div id="radar" class="radar-wrap hidden">
            <div class="radar-card">
              <svg id="radarSvg" viewBox="0 0 360 360" preserveAspectRatio="xMidYMid meet" aria-label="Spindeldiagram"></svg>
              <div class="radar-legend">
                <span><span class="legend-dot" style="background:rgba(10,124,255,.6);border-color:var(--brand)"></span> Min score</span>
                <span><span class="legend-dot" style="background:transparent;border-color:var(--brand-2)"></span> Maks (25)</span>
              </div>
            </div>
          </div>

          <div class="nav-arrows">
            <button class="arrow" id="p5-prev">← Tilbake</button>
            <button class="arrow" id="p5-next">Neste →</button>
          </div>
        </div>

        <!-- END PAGES -->
      </div>
    </div>

    <footer id="ft">Tips: Legg på hjem-skjerm via Del → «Legg til på Hjem-skjerm».</footer>
  </div>

  <!-- Kill switch for gamle service workers + cache -->
  <script>
    (function(){
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(regs){
          regs.forEach(function(r){ r.unregister(); });
        });
      }
      if (window.caches && caches.keys) {
        caches.keys().then(function(keys){
          keys.forEach(function(k){ caches.delete(k); });
        });
      }
    })();
  </script>
  <script src="./app.js?v=20241103"></script>
</body>
</html>
